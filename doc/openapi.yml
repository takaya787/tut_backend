---
openapi: 3.0.3
info:
  title: api
  version: 1.0.0
servers: []
paths:
  "/api/login":
    post:
      summary: login
      description:
      tags:
        - Api::Auth
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                email:
                  type: string
                password:
                  type: string
            example:
              email: michael@example.com
              password: password
      responses:
        "200":
          description: has status 200
          content:
            application/json:
              schema:
                type: object
                properties:
                  user:
                    type: object
                    properties:
                      email:
                        type: string
                      id:
                        type: integer
                      name:
                        type: string
                      gravator_url:
                        type: string
                  token:
                    type: string
              example:
                user:
                  email: michael@example.com
                  id: 2799
                  name: Michael Example
                  gravator_url: https://secure.gravatar.com/avatar/03ea78c0884c9ac0f73e6af7b9649e90
                token: eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoyNzk5fQ.ncfBQkrENhdnITo_twtqROTwBUd5hv-s2HJ8WW7PqC0
  "/api/auto_login":
    get:
      summary: auto_login
      tags:
        - Api::Auth
      responses:
        "200":
          description: has status ok
          content:
            application/json:
              schema:
                type: object
                properties:
                  user:
                    type: object
                    properties:
                      id:
                        type: integer
                      name:
                        type: string
                      email:
                        type: string
                      created_at:
                        type: string
                      activated:
                        type: boolean
                      activated_at:
                        type: string
                      gravator_url:
                        type: string
                      microposts:
                        type: array
                        items:
                          nullable: true
              example:
                user:
                  id: 2806
                  name: user_4
                  email: test4@example.com
                  created_at: "2021-11-26T10:40:45.566Z"
                  activated: true
                  activated_at: "2021-11-26T10:40:45.563Z"
                  gravator_url: https://secure.gravatar.com/avatar/94cd715c8961b8c40644657a3757297e
                  microposts: []
        "401":
          description: has status 401
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
              example:
                message: Please log in
  "/api/auto_relationships":
    get:
      summary: auto_relationships
      tags:
        - Api::Auth
      responses:
        "200":
          description: has status 200
          content:
            application/json:
              schema:
                type: object
                properties:
                  relationships:
                    type: object
                    properties:
                      following:
                        type: array
                        items:
                          nullable: true
                      followers:
                        type: array
                        items:
                          nullable: true
                  following_index:
                    type: array
                    items:
                      nullable: true
                  followers_index:
                    type: array
                    items:
                      nullable: true
              example:
                relationships:
                  following: []
                  followers: []
                following_index: []
                followers_index: []
        "401":
          description: has status 401
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
              example:
                message: Please log in
  "/api/auto_feed":
    get:
      summary: auto_feed
      tags:
        - Api::Auth
      responses:
        "200":
          description: has status 200
          content:
            application/json:
              schema:
                type: object
                properties:
                  microposts:
                    type: array
                    items:
                      nullable: true
              example:
                microposts: []
  "/api/likes":
    post:
      summary: create
      tags:
        - Api::Like
      parameters:
        - name: micropost_id
          in: query
          schema:
            type: integer
          example: 1125
      responses:
        "200":
          description: has status 200
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  micropost:
                    type: object
                    properties:
                      id:
                        type: integer
                      content:
                        type: string
                      user_id:
                        type: integer
                      created_at:
                        type: string
                      updated_at:
                        type: string
              example:
                message: like the micropost successfully
                micropost:
                  id: 1125
                  content: sample content no_1
                  user_id: 2817
                  created_at: "2021-11-26T10:40:46.095Z"
                  updated_at: "2021-11-26T10:40:46.095Z"
        "400":
          description: the same user can not create the same like
          content:
            application/json:
              schema:
                type: object
                properties:
                  micropost:
                    type: object
                    properties:
                      id:
                        type: integer
                      content:
                        type: string
                      user_id:
                        type: integer
                      created_at:
                        type: string
                      updated_at:
                        type: string
                  current_user:
                    type: object
                    properties:
                      id:
                        type: integer
                      name:
                        type: string
                      email:
                        type: string
                      created_at:
                        type: string
                      updated_at:
                        type: string
                      password_digest:
                        type: string
                      admin:
                        type: boolean
                      activation_digest:
                        type: string
                      activated:
                        type: boolean
                      activated_at:
                        type: string
                      reset_digest:
                        nullable: true
                      reset_sent_at:
                        nullable: true
                  message:
                    type: string
              example:
                micropost:
                  id: 1131
                  content: sample content no_7
                  user_id: 2828
                  created_at: "2021-11-26T10:40:46.482Z"
                  updated_at: "2021-11-26T10:40:46.482Z"
                current_user:
                  id: 2829
                  name: user_22
                  email: test22@example.com
                  created_at: "2021-11-26T10:40:46.493Z"
                  updated_at: "2021-11-26T10:40:46.493Z"
                  password_digest: "$2a$04$shoeqdo0jugFmDB2SmbOMeNvT219rx0HhfpxSu/iCyhPiCdsRQ9tG"
                  admin: false
                  activation_digest: "$2a$04$6lm5sard68vjGaXjr7btuOBqdEIi3jjolWcqibPBFcdLEV5p01u.K"
                  activated: true
                  activated_at: "2021-11-26T10:40:46.489Z"
                  reset_digest:
                  reset_sent_at:
                message: Fail to like micropost
        "401":
          description: has status 401
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
              example:
                message: Please log in
    delete:
      summary: destroy
      tags:
        - Api::Like
      parameters:
        - name: micropost_id
          in: query
          schema:
            type: integer
          example: 1133
      responses:
        "202":
          description: has status 204
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
              example:
                message: Like is cancelled successfully
        "400":
          description: has status 400
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
              example:
                message: Like is not founded
        "401":
          description: has status 401
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
              example:
                message: Please log in
  "/api/microposts":
    post:
      summary: create
      tags:
        - Api::Micropost
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                micropost:
                  type: object
                  properties:
                    content:
                      type: string
            example:
              micropost:
                content: Content Sample
      responses:
        "200":
          description: has status 200
          content:
            application/json:
              schema:
                type: object
                properties:
                  micropost:
                    type: object
                    properties:
                      id:
                        type: integer
                      content:
                        type: string
                      user_id:
                        type: integer
                      created_at:
                        type: string
                      updated_at:
                        type: string
                  message:
                    type: string
              example:
                micropost:
                  id: 1144
                  content: Content Sample
                  user_id: 2857
                  created_at: "2021-11-26T10:40:47.486Z"
                  updated_at: "2021-11-26T10:40:47.486Z"
                message: Micropost created
  "/api/microposts/{id}":
    put:
      summary: update
      tags:
        - Api::Micropost
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          example: 1149
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                micropost:
                  type: object
                  properties:
                    content:
                      type: string
            example:
              micropost:
                content: Micropost updated
      responses:
        "200":
          description: has status 200
          content:
            application/json:
              schema:
                type: object
                properties:
                  micropost:
                    type: object
                    properties:
                      content:
                        type: string
                      id:
                        type: integer
                      user_id:
                        type: integer
                      created_at:
                        type: string
                      updated_at:
                        type: string
                  message:
                    type: string
              example:
                micropost:
                  content: Micropost updated
                  id: 1149
                  user_id: 2865
                  created_at: "2021-11-26T10:40:47.718Z"
                  updated_at: "2021-11-26T10:40:47.741Z"
                message: Micropost updated Successfully
  "/api/users":
    get:
      summary: index
      tags:
        - Api::User
      responses:
        "200":
          description: status ok
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    name:
                      type: string
                    email:
                      type: string
                    gravator_url:
                      type: string
              example:
                - id: 2870
                  name: user_52
                  email: test52@example.com
                  gravator_url: https://secure.gravatar.com/avatar/ca913a99c4df1ed225dd5a13399ae076
                - id: 2871
                  name: user_53
                  email: test53@example.com
                  gravator_url: https://secure.gravatar.com/avatar/dd3ef9cf131360b9425faa4778faba54
                - id: 2872
                  name: user_54
                  email: test54@example.com
                  gravator_url: https://secure.gravatar.com/avatar/3ee17889077c069d786b8fdde2333685
                - id: 2873
                  name: user_55
                  email: test55@example.com
                  gravator_url: https://secure.gravatar.com/avatar/72a832f6f5621e3796a631d2c2f08dba
                - id: 2874
                  name: user_56
                  email: test56@example.com
                  gravator_url: https://secure.gravatar.com/avatar/ad95bea7badb976a5bdc32163171d28f
                - id: 2875
                  name: user_57
                  email: test57@example.com
                  gravator_url: https://secure.gravatar.com/avatar/c000303002c32b8c94435d92ae89c03d
                - id: 2876
                  name: user_58
                  email: test58@example.com
                  gravator_url: https://secure.gravatar.com/avatar/379546989ab9649a87e0811c6177a498
                - id: 2877
                  name: user_59
                  email: test59@example.com
                  gravator_url: https://secure.gravatar.com/avatar/1996dc6d2ce163dcf9ef3083b357bb0d
                - id: 2878
                  name: user_60
                  email: test60@example.com
                  gravator_url: https://secure.gravatar.com/avatar/84625290b43b74f71294861ba14d0ef1
                - id: 2879
                  name: user_61
                  email: test61@example.com
                  gravator_url: https://secure.gravatar.com/avatar/daa2ddd27d3a670b4adc81405018a4cf
    post:
      summary: create
      tags:
        - Api::User
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                user:
                  type: object
                  properties:
                    name:
                      type: string
                    email:
                      type: string
                    password:
                      type: string
                    password_confirmation:
                      type: string
            example:
              user:
                name: test name
                email: example@railstutorial.com
                password: password
                password_confirmation: password
      responses:
        "201":
          description: has status 201
          content:
            application/json:
              schema:
                type: object
                properties:
                  user:
                    type: object
                    properties:
                      id:
                        type: integer
                      name:
                        type: string
                      email:
                        type: string
                      created_at:
                        type: string
                      updated_at:
                        type: string
                      password_digest:
                        type: string
                      admin:
                        type: boolean
                      activation_digest:
                        type: string
                      activated:
                        type: boolean
                      activated_at:
                        nullable: true
                      reset_digest:
                        nullable: true
                      reset_sent_at:
                        nullable: true
                  token:
                    type: string
                  gravator_url:
                    type: string
              example:
                user:
                  id: 2902
                  name: test name
                  email: example@railstutorial.com
                  created_at: "2021-11-26T10:40:48.387Z"
                  updated_at: "2021-11-26T10:40:48.387Z"
                  password_digest: "$2a$04$WxmcIW.wBtIHrq/FwlWYquH.DLyAIXvkXuropJxjyMqpifG7oLoYm"
                  admin: false
                  activation_digest: "$2a$04$8EDZs2VRmQeM4.2SlXBvtuMNuVaBWit9NHCNwAxjb7bmI3XW.4.bC"
                  activated: false
                  activated_at:
                  reset_digest:
                  reset_sent_at:
                token: eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoyOTAyfQ.6O6RAkIBbyXBOYTGFF4U2_pyT4S9a2QBt2uCjANj9iU
                gravator_url: https://secure.gravatar.com/avatar/f1a6a90ea0fceff55be9e5abf44f9a1e
        "400":
          description: has status 401
          content:
            application/json:
              schema:
                type: object
                properties:
                  errors:
                    type: object
                    properties:
                      email:
                        type: array
                        items:
                          type: string
                      password:
                        type: array
                        items:
                          type: string
                      password_confirmation:
                        type: array
                        items:
                          type: string
              example:
                errors:
                  email:
                    - is invalid
                  password:
                    - is too short (minimum is 6 characters)
                  password_confirmation:
                    - doesn't match Password
  "/api/users/{id}":
    get:
      summary: show
      tags:
        - Api::User
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          example: 2900
      responses:
        "200":
          description: status ok
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  name:
                    type: string
                  email:
                    type: string
                  created_at:
                    type: string
                  gravator_url:
                    type: string
                  following_count:
                    type: integer
                  followers_count:
                    type: integer
                  microposts:
                    type: array
                    items:
                      nullable: true
              example:
                id: 2900
                name: user_82
                email: test82@example.com
                created_at: "2021-11-26T10:40:48.284Z"
                gravator_url: https://secure.gravatar.com/avatar/6103145db9421b2432c70afed1b5ac2b
                following_count: 0
                followers_count: 0
                microposts: []
    put:
      summary: update
      tags:
        - Api::User
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          example: 2905
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                user:
                  type: object
                  properties:
                    name:
                      type: string
                    email:
                      type: string
                    password:
                      type: string
                    password_confirmation:
                      type: string
            example:
              user:
                name: edit name
                email: michael@example.com
                password: password
                password_confirmation: password
      responses:
        "200":
          description: has status 200
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  name:
                    type: string
                  email:
                    type: string
                  gravator_url:
                    type: string
              example:
                id: 2905
                name: edit name
                email: michael@example.com
                gravator_url: https://secure.gravatar.com/avatar/03ea78c0884c9ac0f73e6af7b9649e90
        "403":
          description: response has status 403
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
              example:
                message: You are not correct user
